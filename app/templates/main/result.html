<!-- result.html -->

<!DOCTYPE html>
<html>
<head>
    <title>Quiz Results</title>
    <link rel="stylesheet" href="../static/result.css">
       <script>
        function toggleAnalysis() {
            var analysisDiv = document.getElementById("analysis");
            if (analysisDiv.style.display === "none") {
                analysisDiv.style.display = "block";
            } else {
                analysisDiv.style.display = "none";
            }
        }
        window.addEventListener('pageshow', function(event) {
        if (event.persisted || (window.performance && window.performance.navigation.type === 2)) {
            // Redirect to the user dashboard page
            const dashboardUrl = "{{ dashboard_url }}";
            window.location.href = dashboardUrl;
            }
        });
        
        window.addEventListener("popstate", function(event) {
        // Redirect to the desired page
        window.location.href = "{{ url_for('main.user') }}";
        });
        history.pushState({}, "");

    </script>
</head>
<body>
    <div class="container">
        <h1>Quiz Results</h1>

        <h2>Your Score: {{ percentage_score }}%</h2>
        


        <p class="show-analysis" onclick="toggleAnalysis()">Show Analysis</p>

        <div id="analysis" class="analysis">
            <h3>Question Analysis:</h3>

            {% for question_id, question_text in questions.items() %}
                <div class="question">
                    <p>{{ question_text[0] }}</p>
                    {% if chosen_answers[question_id] == question_text[1] %}
                        <p class="picked-answer" style="color: green"><span class="tick">✓</span>Your Answer: {{ chosen_answers[question_id] }}</p>
                    {% else %}
                        <p class="picked-answer"><span class="cross">✗</span>Your Answer: {{ chosen_answers[question_id] }}</p>
                        <p class="correct-answer">Correct Answer: {{ question_text[1] }}</p>
                    {% endif %}
                </div>
            {% endfor %}
        </div>

    </div>

 
</body>
</html>